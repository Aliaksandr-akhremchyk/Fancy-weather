(()=>{"use strict";var e={387:(e,t,o)=>{o.d(t,{z:()=>xe});const n=document.querySelector(".time"),r=document.querySelector(".day"),l=document.querySelector(".title-day-first"),c=document.querySelector(".title-day-second"),s=document.querySelector(".title-day-third");let a,i=0,u=!1,d="en";function m(e){let t=new Date;i=60*t.getTimezoneOffset(),void 0===e&&(ne.offset=0-i,a=i),a=e||0,t.setSeconds(t.getSeconds()+a+i);let o=t.getHours(),r=t.getMinutes(),l=t.getSeconds();n.innerHTML=`${o}:${g(r)}:${g(l)}`,(o<6||o>=22)&&(u=!u),0===o&&0===r&&0===l&&y(),22===o&&0===r&&0===l&&ae()}function g(e){return(parseInt(e,10)<10?"0":"")+e}function y(){let e=new Date;e.setSeconds(e.getSeconds()+a+i);let t="ru"===d?0:1,o=[[["Воскресенье","Sunday"],["Вс","Sun"]],[["Понедельник","Monday"],["Пн","Mon"]],[["Вторник","Tuesday"],["Вт","Tue"]],[["Среда","Wednesday"],["Ср","Wed"]],[["Четверг","Thursday"],["Чт","Thu"]],[["Пятница","Friday"],["Пт","Fri"]],[["Суббота","Saturday"],["Сб","Sat"]]],n=e.getDay(),u=e.getDate(),m=e.getMonth();r.innerHTML=`${o[n][1][t]}, ${u} ${[["Января","January"],["Февраля","February"],["Марта","March"],["Апреля","April"],["Мая","May"],["Июня","June"],["Июля","July"],["Августа","August"],["Сентября","September"],["Октября","October"],["Ноября","November"],["Декабря","December"]][m][t]}`,e.setDate(e.getDate()+1),l.innerHTML=o[e.getDay()][0][t],e.setDate(e.getDate()+1),c.innerHTML=o[e.getDay()][0][t],e.setDate(e.getDate()+1),s.innerHTML=o[e.getDay()][0][t]}function p(e,t){return fetch(`https://api.climacell.co/v3/weather/forecast/daily?lat=${t}&lon=${e}&unit_system=si&start_time=now&fields=feels_like%2Ctemp%2Chumidity%2Cwind_speed%2Cweather_code&apikey=jvts28CAJvZln9V73cFjUSQCFtLnX2GT`).then((e=>e.json())).then((e=>{for(let t=0;t<4;++t)ne.temp[t]=(e[t].temp[0].min.value+e[t].temp[1].max.value)/2,ne.tempFeels[t]=(e[t].feels_like[0].min.value+e[t].feels_like[1].max.value)/2,ne.wind[t]=(e[t].wind_speed[0].min.value+e[t].wind_speed[1].max.value)/2,ne.humidity[t]=(e[t].humidity[0].min.value+e[t].humidity[1].max.value)/2,ne.weatherCode[t]=e[t].weather_code.value;return"ok"})).catch((e=>console.log("не получилось с погодой")))}const h=document.querySelector(".t-search"),f=document.querySelector(".t-tempFeels"),v=document.querySelector(".t-wind"),S=document.querySelector(".d-wind"),w=document.querySelector(".t-humidity"),_=document.querySelector(".t-latitude"),q=document.querySelector(".t-longitude"),L=document.querySelector(".weatherCode"),$=document.querySelector(".city"),C=document.querySelector(".start-overlay"),k=document.querySelector(".message");let b=[h,f,v,S,w,_,q,k],x=[["Поиск","Search"],["Ощущается: ","Feels like: "],["Ветер: ","Wind: "],["м/с","m/s"],["Влажность: ","Humidity: "],["Широта: ","Latitude: "],["Долгота: ","Longitude: "],["Что-то пошло не так...","Something went wrong..."]],I=["freezing_rain_heavy","freezing_rain","freezing_rain_light","freezing_drizzle","ice_pellets_heavy","ice_pellets","ice_pellets_light","snow_heavy","snow","snow_light","flurries","tstorm","rain_heavy","rain","rain_light","drizzle","fog_light","fog","cloudy","mostly_cloudy","partly_cloudy","mostly_clear","clear"],z=[["Сильный ледяной дождь","Heavy freezing rain"],["Ледяной дождь","Freezing rain"],["Легкий ледяной дождь","Light freezing rain"],["Ледяная изморось","Freezing drizzle"],["Сильный град","Heavy ice pellets"],["Град","Ice pellets"],["Лекгий град","Light ice pellets"],["Сильный снег","Heavy snow_heavy"],["Снег","Snow"],["Слабый снег","Light snow"],["Хрень","Flurries"],["Шторм","Tstorm"],["Сильный дождь","Heavy rain"],["Дождь","Rain"],["Легкий дождь","Light rain"],["Изморось","Drizzle"],["Легкий туман","Light fog"],["Туман","Fog"],["Сильная облачность","Cloudy"],["Значительная облачность","Mostly cloudy"],["Переменная облачность","Partly cloudy"],["Незначительная облачность","Mostly clear"],["Ясно","Clear"]];function T(){let e="ru"===d?0:1;for(let t=0;t<b.length;++t)b[t].textContent=x[t][e];!function(e){let t="ru"===d?0:1;for(let o=0;o<I.length;++o)if(e==I[o])return void(L.textContent=z[o][t])}(ne.weatherCode[0]),A.setAttribute("placeholder",e?"Сity or ZIP":"Город или Индекс"),$.textContent=ne.place[e]}const F=document.querySelector(".start-message"),M=document.querySelector(".start-confirm");let j;var D={enableHighAccuracy:!0,timeout:5e3,maximumAge:0};function E(e){let t=e.coords;ne.lat=t.latitude,ne.lng=t.longitude,j.flyTo({center:[t.longitude,t.latitude],essential:!0}),function(e,t){let o="ru"===d?0:1;return fetch(`https://api.opencagedata.com/geocode/v1/json?q=${t}%2C%20${e}&key=75fa2f2d37824a27be34212ce12f3406&language=${d}`).then((e=>e.json())).then((e=>(ne.place[o]=`${e.results[0].components.city||e.results[0].components.town||e.results[0].components.village||e.results[0].components["ISO_3166-1_alpha-3"]}, ${e.results[0].components.country}`,ne.offset=e.results[0].annotations.timezone.offset_sec,"ok"))).catch((e=>console.log("не получилось с Местом")))}(t.longitude,t.latitude).then((e=>p(t.longitude,t.latitude))).then((e=>{re(),C.style.display="none"}))}function H(e){O(),re(1),console.warn(`ERROR(${e.code}): ${e.message}`)}function O(){F.classList.toggle("move")}M.addEventListener("click",(()=>{C.style.display="none",O()}));const R=document.querySelector(".search-btn"),A=document.querySelector(".search-input");function J(){(function(e){let t="ru"===d?0:1;return fetch(`https://api.opencagedata.com/geocode/v1/json?q=${e}&key=75fa2f2d37824a27be34212ce12f3406&language=${d}`).then((e=>e.json())).then((e=>(ne.place[t]=`${e.results[0].components.city||e.results[0].components.town||e.results[0].components.village||e.results[0].components["ISO_3166-1_alpha-3"]}, ${e.results[0].components.country}`,ne.offset=e.results[0].annotations.timezone.offset_sec,ne.lng=e.results[0].geometry.lng,ne.lat=e.results[0].geometry.lat,[e.results[0].geometry.lng,e.results[0].geometry.lat]))).catch((e=>console.log("не получилось с кооординатами")))})(A.value).then((e=>(j.flyTo({center:[...e],essential:!0}),p(...e)))).then((e=>{qe(),re()})).catch((e=>{console.log("Не получилось всё"),k.classList.toggle("move"),setTimeout((()=>{k.classList.remove("move")}),8e3)}))}R.addEventListener("click",J),A.addEventListener("keypress",(e=>{13!=e.which&&13!=e.keyCode||(J(),A.blur())})),A.addEventListener("focus",(()=>A.value="")),k.addEventListener("click",(()=>k.classList.remove("move")));const P=document.querySelector(".temp"),W=document.querySelector(".temp-day-first"),N=document.querySelector(".temp-day-second"),Q=document.querySelector(".temp-day-third"),Y=document.querySelector(".tempFeels"),Z=document.querySelector(".wind"),U=document.querySelector(".humidity"),V=document.querySelector(".latitude"),X=document.querySelector(".longitude"),B=document.querySelector(".icon-today"),G=document.querySelector(".icon-first"),K=document.querySelector(".icon-second"),ee=document.querySelector(".icon-third");let te=[P,W,N,Q],oe=[B,G,K,ee],ne={temp:[0,0,0,0],tempFeels:[0,0,0,0],wind:[0,0,0,0],weatherCode:["clear","clear","clear","clear"],humidity:[0,0,0,0],place:["Город, Республика","City, Country"],offset:0,lng:12.3456789,lat:12.3456789};function re(e){xe(ne.offset),localStorage.setItem("search-city",A.value),ce(),ae(),Z.textContent=ne.wind[0].toFixed(1),U.textContent=`${Math.round(ne.humidity[0])} %`,X.textContent=le(ne.lng),V.textContent=le(ne.lat),T(),e||function(e,t){let o="ru"===d?"en":"ru",n="ru"===o?0:1;fetch(`https://api.opencagedata.com/geocode/v1/json?q=${t}%2C%20${e}&key=75fa2f2d37824a27be34212ce12f3406&language=${o}`).then((e=>e.json())).then((e=>(ne.place[n]=`${e.results[0].components.city||e.results[0].components.town||e.results[0].components.village||e.results[0].components["ISO_3166-1_alpha-3"]}, ${e.results[0].components.country}`,"ok"))).catch((e=>console.log("не получилось с Местом")))}(ne.lng,ne.lat)}function le(e){return` ${(e=(e+="").split("."))[0]}°  ${e[1][0]+e[1][1]}'  ${e[1][2]+e[1][3]}" `}function ce(){for(let e=0;e<te.length;++e){let t=Math.round("°f"===Se?se(ne.temp[e]):ne.temp[e]);te[e].textContent=`${t>0?"+":""}${t}`}let e=Math.round("°f"===Se?se(ne.tempFeels[0]):ne.tempFeels[0]);Y.textContent=`${e>0?"+":""}${e}`}function se(e){return 1.8*e+32}function ae(){let e="";u&&(e="-night");for(let t=0;t<oe.length;++t)oe[t].style.backgroundImage=`url(../src/assets/icons/${ne.weatherCode[t]}${e}.svg)`}const ie=document.querySelector(".background__img"),ue=document.querySelector(".header__refreshBtn"),de=document.querySelector(".inVector"),me=document.querySelector(".leng-en"),ge=document.querySelector(".leng-ru"),ye=document.querySelector(".deg-f"),pe=document.querySelector(".deg-c"),he=document.querySelector(".header");let fe=180,ve=!1,Se="°с";function we(e){var t;e.target.classList.contains("passive")&&(d=e.target.textContent.toLowerCase(),t=d,localStorage.setItem("weather-leng",t),y(),T(),me.classList.toggle("passive"),ge.classList.toggle("passive"))}function _e(e){var t;e.target.classList.contains("passive")&&(Se=e.target.textContent.toLowerCase(),t=Se,localStorage.setItem("weather-deg",t),ce(),ye.classList.toggle("passive"),pe.classList.toggle("passive"))}function qe(){fetch("https://api.unsplash.com/photos/random?query=morning&client_id=e2077ad31a806c894c460aec8f81bc2af4d09c4f8104ae3177bb809faf0eac17").then((e=>e.json())).then((e=>function(e){const t=new Image;t.src=e,t.onload=()=>{ve?(document.body.style.backgroundImage=`url(${t.src})`,Le(),ve=!ve):(ie.style.backgroundImage=`url(${t.src})`,Le(),ve=!ve)}}(e.urls.regular)))}function Le(){ie.style.opacity=ve?"0":"1"}ye.addEventListener("click",_e),pe.addEventListener("click",_e),me.addEventListener("click",we),ge.addEventListener("click",we),ue.addEventListener("click",(()=>{de.style.transform=`rotate(${fe}deg)`,fe+=180,qe()})),document.addEventListener("scroll",(function(){0===window.scrollY?he.classList.remove("darck-header"):he.classList.add("darck-header")}));const $e=document.querySelector(".search-input_speech"),Ce=window.SpeechRecognition||window.webkitSpeechRecognition;let ke;mapboxgl.accessToken="pk.eyJ1IjoiYWxleDE5ODQwNSIsImEiOiJja2k4dzc2aTcwOXRmMzRtemFjN3ZjYWdpIn0.iu__APcp4HT_E4a1CHa6jQ",j=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[0,0],zoom:9.5}),m();let be=setInterval(m,1e3);function xe(e){clearInterval(be),m(e),be=setInterval(m,1e3,e),y()}y(),"°f"===localStorage.getItem("weather-deg")&&(Se="°f",ye.classList.toggle("passive"),pe.classList.toggle("passive")),"ru"===localStorage.getItem("weather-leng")&&(d="ru",me.classList.toggle("passive"),ge.classList.toggle("passive")),null===localStorage.getItem("search-city")||""===localStorage.getItem("search-city")||(A.value=localStorage.getItem("search-city")),navigator.geolocation.getCurrentPosition(E,H,D),ke=new Ce,$e.addEventListener("click",(()=>{ke.lang="ru"===d?"ru-RU":"en-EN",console.log(ke.lang),ke.start(),console.log("Ready to receive a color command."),$e.style.fill="orange",setTimeout((()=>{$e.style.fill="white"}),3e3)})),ke.onresult=function(e){console.log(e.results[0][0].transcript),A.value=e.results[0][0].transcript,J()},ke.onerror=function(e){console.log("Ошибка в голосовом наборе")}}},t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={exports:{}};return e[n](r,r.exports,o),r.exports}o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o(387)})();