(()=>{"use strict";var e={819:(e,t,n)=>{n.d(t,{X:()=>R});const o=document.querySelector(".time"),c=document.querySelector(".day"),r=document.querySelector(".title-day-first"),s=document.querySelector(".title-day-second"),l=document.querySelector(".title-day-third");let a,u=0;function i(e){a=e;let t=new Date;u=60*t.getTimezoneOffset(),t.setSeconds(t.getSeconds()+(e||0===e?e+u:0));let n=t.getHours(),c=t.getMinutes(),r=t.getSeconds();o.innerHTML=`${n}:${d(c)}:${d(r)}`,0===n&&0===c&&0===r&&m()}function d(e){return(parseInt(e,10)<10?"0":"")+e}function m(){let e=new Date;e.setSeconds(e.getSeconds()+(a?a+u:0));let t=[["Воскресенье","Вс"],["Понедельник","Пн"],["Вторник","Вт"],["Среда","Ср"],["Четверг","Чт"],["Пятница","Пт"],["Суббота","Сб"]],n=e.getDay(),o=e.getDate(),i=e.getMonth();c.innerHTML=`${t[n][1]}, ${o} ${["Января","Февраля","Марта","Апреля","Мая","Июня","Июля","Августа","Сентября","Октября","Ноября","Декабря"][i]}`,e.setDate(e.getDate()+1),r.innerHTML=t[e.getDay()][0],e.setDate(e.getDate()+1),s.innerHTML=t[e.getDay()][0],e.setDate(e.getDate()+1),l.innerHTML=t[e.getDay()][0]}const y=document.querySelector(".search-btn"),g=document.querySelector(".search-input");y.addEventListener("click",(function(){var e;(e=g.value,console.log(e),fetch(`https://api.opencagedata.com/geocode/v1/json?q=${e}&key=75fa2f2d37824a27be34212ce12f3406&language=ru`).then((e=>e.json())).then((e=>(console.log(e),$.place=`${e.results[0].components.city||e.results[0].components.town||e.results[0].components.village||e.results[0].components["ISO_3166-1_alpha-3"]}, ${e.results[0].components.country}`,$.offset=e.results[0].annotations.timezone.offset_sec,$.lng=e.results[0].geometry.lng,$.lat=e.results[0].geometry.lat,[e.results[0].geometry.lng,e.results[0].geometry.lat]))).catch((e=>console.log("не получилось с кооординатами")))).then((e=>(function(e,t){mapboxgl.accessToken="pk.eyJ1IjoiYWxleDE5ODQwNSIsImEiOiJja2k4dzc2aTcwOXRmMzRtemFjN3ZjYWdpIn0.iu__APcp4HT_E4a1CHa6jQ",new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[e,t],zoom:8.5})}(...e),async function(e,t){return fetch(`https://api.climacell.co/v3/weather/forecast/daily?lat=${t}&lon=${e}&unit_system=si&start_time=now&fields=feels_like%2Ctemp%2Chumidity%2Cwind_speed%2Cweather_code&apikey=jvts28CAJvZln9V73cFjUSQCFtLnX2GT`).then((e=>e.json())).then((e=>{for(let t=0;t<4;++t)$.temp[t]=(e[t].temp[0].min.value+e[t].temp[1].max.value)/2,$.tempFeels[t]=(e[t].feels_like[0].min.value+e[t].feels_like[1].max.value)/2,$.wind[t]=(e[t].wind_speed[0].min.value+e[t].wind_speed[1].max.value)/2,$.humidity[t]=(e[t].humidity[0].min.value+e[t].humidity[1].max.value)/2,$.weatherCode[t]=e[t].weather_code.value;return console.log(e),"ok"})).catch((e=>console.log("не получилось с погодой")))}(...e)))).then((e=>(clearInterval(R),i($.offset),R=setInterval(i,1e3,$.offset),m(),localStorage.setItem("search-city",g.value),D(),q.textContent=+$.wind[0].toFixed(1)+" м/с",w.textContent=$.weatherCode[0],x.textContent=`${Math.round($.humidity[0])} %`,C.textContent=$.place,L.textContent=b($.lng),void(_.textContent=b($.lat))))).catch((e=>console.log("не получилось ваще")))}));const p=document.querySelector(".temp"),f=document.querySelector(".temp-day-first"),h=document.querySelector(".temp-day-second"),v=document.querySelector(".temp-day-third"),S=document.querySelector(".tempFeels"),q=document.querySelector(".wind"),w=document.querySelector(".weatherCode"),x=document.querySelector(".humidity"),C=document.querySelector(".city"),_=document.querySelector(".latitude"),L=document.querySelector(".longitude");let k=[p,f,h,v],$={temp:[],tempFeels:[],wind:[],weatherCode:[],humidity:[],place:"",offset:0,lng:0,lat:0};function b(e){return` ${(e=(e+="").split("."))[0]}°  ${e[1][0]+e[1][1]}'  ${e[1][2]+e[1][3]}" `}function D(){for(let e=0;e<k.length;++e)k[e].textContent=Math.round("°f"===Q?j($.temp[e]):$.temp[e]);S.textContent=Math.round("°f"===Q?j($.tempFeels[0]):$.tempFeels[0])}function j(e){return 1.8*e+32}const I=document.querySelector(".background__img"),M=document.querySelector(".header__refreshBtn"),T=document.querySelector(".inVector"),E=document.querySelector(".leng-en"),F=document.querySelector(".leng-ru"),H=document.querySelector(".deg-f"),O=document.querySelector(".deg-c");let z=180,J=!1,P="en",Q="°с";function X(e){e.target.classList.contains("passive")&&(P=e.target.textContent.toLowerCase(),E.classList.toggle("passive"),F.classList.toggle("passive"))}function A(e){e.target.classList.contains("passive")&&(Q=e.target.textContent.toLowerCase(),console.log(Q),D(),H.classList.toggle("passive"),O.classList.toggle("passive"))}function N(){I.style.opacity=J?"0":"1"}H.addEventListener("click",A),O.addEventListener("click",A),E.addEventListener("click",X),F.addEventListener("click",X),M.addEventListener("click",(()=>{T.style.transform=`rotate(${z}deg)`,z+=180,fetch("https://api.unsplash.com/photos/random?query=morning&client_id=e2077ad31a806c894c460aec8f81bc2af4d09c4f8104ae3177bb809faf0eac17").then((e=>e.json())).then((e=>function(e){const t=new Image;t.src=e,t.onload=()=>{J?(document.body.style.backgroundImage=`url(${t.src})`,N(),J=!J):(I.style.backgroundImage=`url(${t.src})`,N(),J=!J)}}(e.urls.regular)))})),i();let R=setInterval(i,1e3);m()}},t={};function n(o){if(t[o])return t[o].exports;var c=t[o]={exports:{}};return e[o](c,c.exports,n),c.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n(819)})();